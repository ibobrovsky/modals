!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).createModalInstance=e()}(this,(function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n=function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)};function i(t,e,n){if(n||2===arguments.length)for(var i,o=0,r=e.length;o<r;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))}var o=function(){function t(){this.events={}}return t.prototype.$on=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)this.$on(t[n],e);else Array.isArray(this.events[t])||(this.events[t]=[]),this.events[t].push(e)},t.prototype.$off=function(t,e){if(t||e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)this.$off(t[n],e);else if(t){var o=this.events[t];if(o)if(e){for(var r=o.length;r--;)if(o[r]===e){o.splice(r,1);break}}else this.events[t]=void 0}}else this.events={}},t.prototype.$emit=function(t){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.events[t];if(!o)return o;o.forEach((function(t){t&&(n?t.apply(e,n):t.call(e))}))},t}();function r(t){console.error(t)}function s(t,e){if(t)try{t(e)}catch(t){r(t)}}var a=function(){function t(){this.ids=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.ids.length},enumerable:!1,configurable:!0}),t.prototype.getAll=function(){return this.ids},t.prototype.set=function(t){this.has(t)||this.ids.push(t)},t.prototype.has=function(t){return this.ids.includes(t)},t.prototype.unset=function(t){var e=this.ids.indexOf(t);-1!==e&&this.ids.splice(e,1)},t}(),l=function(t){function n(e,n){var i=t.call(this)||this;return i.params=e,i.dialogParams=n,i}return e(n,t),n.prototype.getContent=function(){var t=this.params.content;switch(typeof t){case"string":return t;case"function":var e="";try{e=t({uid:this.dialogParams.dialogUid,id:this.dialogParams.dialogId})}catch(t){e=(null==t?void 0:t.message)||"Error",r(t)}return e;default:return""}},n.prototype.getContainer=function(){return this.params.container||document.body},n}(o);function c(t,e){try{var n=!1;if(!t||!t.parentNode&&!e)return n;var i=t.parentNode||e;return i&&(i.removeChild(t),n=!0),n}catch(t){return!1}}function d(t,e){return!!e&&("string"==typeof t?e.insertAdjacentHTML("beforeend",t):e.appendChild(t),!0)}function u(t){if(t)for(;t.childNodes.length>0;)t.firstChild&&t.removeChild(t.firstChild)}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[];return t.forEach((function(t){if(t)if("string"==typeof t||"number"==typeof t)n.push(String(t));else if(Array.isArray(t)){if(!t.length)return;var e=h.apply(void 0,t);e.length&&n.push.apply(n,e)}else if("object"==typeof t)if(t.toString===Object.prototype.toString)for(var i in t)Object.hasOwnProperty.call(t,i)&&t[i]&&n.push(i);else n.push(t.toString())})),n}function f(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t&&(e=t.classList).add.apply(e,h.apply(void 0,n))}var p=function(){function t(){}return t.create=function(t,e){var n=document.createElement("div");return e&&f(n,e),d("string"==typeof t?t:this.createDefaultPreloader(),n),n},t.createDefaultPreloader=function(){return'\n      <svg\n        version="1.1"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:xlink="http://www.w3.org/1999/xlink"\n        x="0px"\n        y="0px"\n        viewBox="0 0 100 100"\n        enable-background="new 0 0 100 100"\n        xml:space="preserve"\n      >\n        <path\n          d="M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3 c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"\n        />\n        <path\n          d="M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7 c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"\n        />\n        <path\n          d="M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5 L82,35.7z"\n        />\n      </svg>\n    '},t}();function v(t){return{enterClass:"".concat(t,"-enter"),enterToClass:"".concat(t,"-enter-to"),enterActiveClass:"".concat(t,"-enter-active"),leaveClass:"".concat(t,"-leave"),leaveToClass:"".concat(t,"-leave-to"),leaveActiveClass:"".concat(t,"-leave-active")}}function y(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function g(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return y(e)+y(t[n])})))}var w="undefined"!=typeof window,m=w&&window.navigator.userAgent.toLowerCase(),b=m&&m.indexOf("msie 9.0")>0,C="transition",$="animation";function O(t){var e=window.getComputedStyle(t),n=g((e[C+"Delay"]||"").split(", "),(e[C+"Duration"]||"").split(", ")),i=g((e[$+"Delay"]||"").split(", "),(e[$+"Duration"]||"").split(", "));return Math.max(n,i)||0}w&&!b&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(C="WebkitTransition"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&($="WebkitAnimation"));var S=w?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function A(t){S((function(){S(t)}))}function x(t,e,n,i){if(!n||"string"==typeof t)return d(t,e),void(i&&s(i));var o=v(n);if(t.classList.add(o.enterClass),t.classList.add(o.enterActiveClass),d(t,e)){var r=O(t);A((function(){t.classList.add(o.enterToClass),t.classList.remove(o.enterClass),setTimeout((function(){t.classList.remove(o.enterActiveClass),t.classList.remove(o.enterToClass),i&&s(i)}),r)}))}}var j=function(){function t(){}return t.getScrollbarWidth=function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t.checkScrollbar=function(){var e=document.body.getBoundingClientRect();this.isBodyOverflowing=e.left+e.right<window.innerWidth,this.scrollbarWidth=t.getScrollbarWidth()},t.setScrollbar=function(t){if(void 0===t&&(t="fixed-content"),this.isBodyOverflowing){for(var e=document.querySelectorAll(".".concat(t)),n=0;n<e.length;n++){var i=e[n],o=i.style.paddingRight,r=window.getComputedStyle(i,null).paddingRight;this.data.set(i,o),i.style.paddingRight="".concat(parseFloat(r)+this.scrollbarWidth,"px")}var s=document.body.style.paddingRight,a=window.getComputedStyle(document.body,null).paddingRight;this.data.set(document.body,s),document.body.style.paddingRight="".concat(parseFloat(a)+this.scrollbarWidth,"px")}},t.adjustDialog=function(t){if(t){var e=t.scrollHeight>document.documentElement.clientHeight;1===this.count&&(this.firstIsModalOverflowing=e,this.firstIsBodyOverflowing=this.isBodyOverflowing),(!this.isBodyOverflowing&&e||!this.firstIsBodyOverflowing&&this.firstIsModalOverflowing)&&(t.style.paddingLeft="".concat(this.scrollbarWidth,"px")),(this.isBodyOverflowing&&!e||this.firstIsBodyOverflowing&&!this.firstIsModalOverflowing)&&(t.style.paddingRight="".concat(this.scrollbarWidth,"px"))}},t.resetAdjustments=function(t){t&&(t.style.paddingLeft="",t.style.paddingRight="")},t.resetScrollbar=function(t){void 0===t&&(t="fixed-content");for(var e=document.querySelectorAll(".".concat(t)),n=0;n<e.length;n++){var i=e[n],o=this.data.get(i);void 0!==o&&(i.style.paddingRight=o,this.data.delete(i))}var r=this.data.get(document.body);void 0!==r&&(document.body.style.paddingRight=r,this.data.delete(document.body))},t.add=function(t,e){this.count++,this.checkScrollbar(),this.setScrollbar(e),this.adjustDialog(t),document.body.style.overflowY="hidden"},t.remove=function(e,n,i){var o=this;setTimeout((function(){t.resetAdjustments(e),document.body.style.overflowY="",1===o.count&&o.resetScrollbar(i),o.count--}),n||0)},t.isBodyOverflowing=!1,t.firstIsModalOverflowing=!1,t.firstIsBodyOverflowing=!1,t.scrollbarWidth=0,t.data=new WeakMap,t.count=0,t}();function E(t,e,n,i){if(t){if(!n)return c(t,e),void(i&&s(i));var o=v(n);t.classList.add(o.leaveClass),t.classList.add(o.leaveActiveClass),A((function(){var n=O(t);t.classList.remove(o.leaveClass),t.classList.add(o.leaveToClass),setTimeout((function(){t.classList.remove(o.leaveActiveClass),t.classList.remove(o.leaveToClass),c(t,e),i&&s(i)}),n)}))}}var I=function(t){function n(e,n){var i=t.call(this,e,n)||this;i.isShowPreloader=!1;var o=i.createEl(),r=o[0],s=o[1];return i.$el=r,i.$wrapper=s,i}return e(n,t),Object.defineProperty(n.prototype,"defaultClasses",{get:function(){var t="b-modal";return{el:t,open:"".concat(t,"-open"),hide:"".concat(t,"-hide"),overlay:"".concat(t,"--overlay"),container:"".concat(t,"__container"),wrapper:"".concat(t,"__wrapper"),dialog:"".concat(t,"__dialog"),preloader:"".concat(t,"__preloader")}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"classes",{get:function(){var t=this.params.classes;return{el:(null==t?void 0:t.el)?[this.defaultClasses.el,t.el]:this.defaultClasses.el,open:(null==t?void 0:t.open)?[this.defaultClasses.open,t.open]:this.defaultClasses.open,hide:(null==t?void 0:t.hide)?[this.defaultClasses.hide,t.hide]:this.defaultClasses.hide,overlay:(null==t?void 0:t.overlay)?[this.defaultClasses.overlay,t.overlay]:this.defaultClasses.overlay,container:(null==t?void 0:t.container)?[this.defaultClasses.container,t.container]:this.defaultClasses.container,wrapper:(null==t?void 0:t.wrapper)?[this.defaultClasses.wrapper,t.wrapper]:this.defaultClasses.wrapper,dialog:(null==t?void 0:t.dialog)?[this.defaultClasses.dialog,t.dialog]:this.defaultClasses.dialog,preloader:(null==t?void 0:t.preloader)?[this.defaultClasses.preloader,t.preloader]:this.defaultClasses.preloader}},enumerable:!1,configurable:!0}),n.prototype.show=function(t,e){var n=this,i=this.params.cacheContent&&this.$content?this.$content:function(){var t=n.getContent();if("string"==typeof t)return n.params.cacheContent&&(n.$content=t),t;n.isShowPreloader=!0,t.then((function(t){n.setContent(t,e)}))}();this.isShowPreloader&&(this.$preloader=p.create(this.params.preloader,this.classes.preloader),u(this.$wrapper),d(this.$preloader,this.$wrapper)),x(this.$el,this.getContainer(),this.params.effect),t&&(this.params.scrollbar?this.params.scrollbar.add(this.$el):j.add(this.$el,this.params.scrollbarFixedClass),f(this.getOverflowContainer(),this.classes.open)),!this.isShowPreloader&&i&&(u(this.$wrapper),this.$dialog=this.wrapDialog(i),x(this.$dialog,this.$wrapper,this.params.contentEffect,e))},n.prototype.hide=function(t,e){var n=this;E(this.$el,this.getContainer(),this.params.effect,(function(){t&&(n.params.scrollbar?n.params.scrollbar.remove(n.$el):j.remove(n.$el,0,n.params.scrollbarFixedClass),function(t){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t&&(e=t.classList).remove.apply(e,h.apply(void 0,n))}(n.getOverflowContainer(),n.classes.open))})),E(this.$dialog,this.$wrapper,this.params.contentEffect,e)},n.prototype.remove=function(){c(this.$el,this.getContainer())},n.prototype.wrapDialog=function(t){var e=document.createElement("div");return f(e,this.classes.dialog),d(t,e),e},n.prototype.createEl=function(){var t=document.createElement("div");f(t,this.classes.wrapper);var e=document.createElement("div");f(e,this.classes.container),e.appendChild(t);var n=document.createElement("div");return f(n,this.classes.el,this.classes.overlay),n.appendChild(e),n.addEventListener("click",this.closeHandler.bind(this)),[n,t]},n.prototype.getOverflowContainer=function(){return"html"===this.params.overflowContainer?document.documentElement:document.body},n.prototype.closeHandler=function(t){var e,n=t.target;(this.$wrapper===n||this.$preloader===n||(null===(e=null==n?void 0:n.closest)||void 0===e?void 0:e.call(n,"[data-modal-close]")))&&this.$emit("close")},n.prototype.setContent=function(t,e){this.params.cacheContent&&(this.$content=t),t&&(this.isShowPreloader=!1,u(this.$wrapper),this.$dialog=this.wrapDialog(t),x(this.$dialog,this.$wrapper,this.params.contentEffect,e))},n}(l),L=function(){function t(){}return t.create=function(t,e){return new I(t,e)},t}();var P=0,D=new a,k=function(t){function o(e){var n,o=e.wrapperUid,r=e.id,s=e.params,a=t.call(this)||this;return a.isDestroyed=!1,a.isShowed=!1,a.wrapperUid=o,a.uid="i-".concat(a.wrapperUid,"-").concat(P++,"-").concat((void 0===n&&(n=8),i([],Array(n),!0).map((function(){return(~~(36*Math.random())).toString(36)})).join(""))),a.view=L.create(s,{dialogUid:a.uid,dialogId:r}),a.view.$on("close",(function(){a.hide()})),a.id=r,a.params=s,a.callHook("init",{}),a.isInit=!0,a}return e(o,t),o.prototype.getId=function(){return this.id},o.prototype.getUid=function(){return this.uid},o.prototype.destroy=function(){this.isDestroyed||(this.isDestroyed=!0,this.view.remove(),this.isShowed=!1,this.callHook("destroyed",{}),this.$off(),this.view.$off())},o.prototype.show=function(){var t=this;if(!(D.has(this.uid)||this.isShowed||this.isDestroyed)){var e=!0;this.callHook("beforeShow",{cancel:function(){e=!1}}),e&&(this.isShowed=!0,D.set(this.uid),this.view.show(1===D.length,(function(){t.callHook("afterShow",{})})))}},o.prototype.hide=function(){var t=this;if(D.has(this.uid)&&this.isShowed&&!this.isDestroyed){var e=!0;this.callHook("beforeHide",{cancel:function(){e=!1}}),e&&(this.view.hide(1===D.length,(function(){t.callHook("afterHide",{})})),D.unset(this.uid),this.isShowed=!1)}},o.prototype.$on=function(e,n){t.prototype.$on.call(this,e,n)},o.prototype.$off=function(e,n){t.prototype.$off.call(this,e,n)},o.prototype.$emit=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t.prototype.$emit.apply(this,i([e],n,!1))},o.prototype.callHook=function(t,e){var i,o=null===(i=this.params.events)||void 0===i?void 0:i[t],r=n({id:this.id,uid:this.uid},e);this.$emit(t,r),s(o,r)},o}(o),_=Object.prototype.hasOwnProperty;function T(t,e){return _.call(t,e)}function H(t){return t&&"object"==typeof t&&!Array.isArray(t)}function B(t){for(var e,n,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];if(!o.length)return t;var s=o.shift();if(H(t)&&H(s))for(var a in s)H(s[a])?(t[a]||Object.assign(t,((e={})[a]={},e)),B(t[a],s[a])):Object.assign(t,((n={})[a]=s[a],n));return B.apply(void 0,i([t],o,!1))}function M(t,e,n){if(void 0===n&&(n=!1),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={}),n)return B({},t,e);var i,o={};for(i in t)r(i);for(i in e)T(t,i)||r(i);function r(n){var i,r;o[n]=(i=t[n],void 0===(r=e[n])?i:r)}return o}var W=function(){function t(t){var e=t.parentEvents,n=t.defaults,i=t.uid;this.instances=[],this.definitions={},this.uid=i,this.defaults=n,this.parentEvents=e}return t.prototype.setDefinitions=function(t){var e=this;t.forEach((function(t){var n=t.id,i=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]])}return n}(t,["id"]);n&&(e.definitions[n]=i)}))},t.prototype.get=function(t,e){if("string"==typeof t){var i=this.getInstance(t);return i||(this.definitions[t]?this.build(n({id:t},M(this.definitions[t],e,!0))):e?this.build(n({id:t},e)):void 0)}return this.build(t)},t.prototype.getInstance=function(t){var e=this.instances.find((function(e){return e.uid===t||e.id===t}));return e?e.dialog:void 0},t.prototype.unsetInstance=function(t){var e=this.instances.findIndex((function(e){return e.uid===t||e.id===t}));-1!==e&&this.instances.splice(e,1)},t.prototype.build=function(t){var e=this,n=M(this.defaults,t,!0),i=new k({id:n.id,params:n,wrapperUid:this.uid}),o=i.hide.bind(i);return this.parentEvents.$on("hideAll",o),i.$on("destroyed",(function(t){var n=t.id;e.unsetInstance(n),e.parentEvents.$off("hideAll",o)})),this.instances.push({id:i.getId(),uid:i.getUid(),dialog:i}),i},t}(),R=0,U=function(){function t(t){this.uid=R++,this.events=new o;var e=[];(null==t?void 0:t.modals)&&(e=t.modals,delete t.modals),this.container=new W({uid:this.uid,defaults:t,parentEvents:this.events}),this.setDefinitions(e)}return t.create=function(e){return new t(e)},t.prototype.getInstance=function(t,e){return this.container.get(t,e)},t.prototype.setDefinitions=function(t){this.container.setDefinitions(t)},t.prototype.show=function(t,e){var n=this.container.get(t,e);n&&n.show()},t.prototype.hide=function(t){var e=this.container.getInstance(t);e&&e.hide()},t.prototype.hideAll=function(){this.events.$emit("hideAll")},t.prototype.destroy=function(t){var e=this.container.getInstance(t);e&&e.destroy()},t.prototype.$on=function(t,e,n){var i=this.container.getInstance(t);i&&i.$on(e,n)},t.prototype.$off=function(t,e,n){var i=this.container.getInstance(t);i&&i.$off(e,n)},t}();return function(t){return U.create(t)}}));
