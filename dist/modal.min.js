!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Modal=e()}(this,(function(){"use strict";var t=Object.prototype.hasOwnProperty;function e(e,n){return t.call(e,n)}function n(t,e){v(t)||(t=[]),v(e)||(e=[]);var n=t.length,r=0;if("number"==typeof e.length)for(var o=e.length;r<o;r++)t[n++]=e[r];else for(;void 0!==e[r];)t[n++]=e[r++];return t.length=n,t}var r,o,i=(r=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},o=Object.create(null),function(t){return o[t]||(o[t]=r(t))});function a(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function s(t){return"string"==typeof t}function l(t){if(!c(t)||"[object Object]"!==function(t){return Object.prototype.toString.call(t)}(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.hasOwnProperty("constructor")&&e.constructor;return"function"==typeof n&&Function.prototype.toString.call(n)===Function.prototype.toString.call(Object)}function c(t){return!!t&&"object"==typeof t}function u(t){return c(t)&&!l(t)&&"nodeType"in t}function f(t){return u(t)&&t.nodeType===Node.ELEMENT_NODE}function d(t){return null===t}function p(t){return null==t}function v(t){return!p(t)&&Array.isArray(t)}function h(t){return"function"==typeof t}function y(t){return!!t&&("object"==typeof t||"function"==typeof t)}function g(t){return!p(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function m(t){!function(t){console.error(t)}(t)}function _(t){console.log(t)}function b(t,e,n){var r;try{r=n?t.apply(e,n):t.call(e)}catch(t){m(t)}return r}var w=/^\s*function (\w+)/,C=/^(String|Number|Boolean|Function|Symbol|BigInt)$/;function E(t,e){var n={content:{type:[String,Function,Node,Promise],default:""},preloader:{type:String,default:function(t,e){var n=N(this,t,e,"preloaderColor");return'\n                    <div class="'+S.PRELOADER_ICON+'">\n                        <svg '+(n?'style="fill: '+n+'"':"")+' version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\n                            <path d="M31.6,3.5C5.9,13.6-6.6,42.7,3.5,68.4c10.1,25.7,39.2,38.3,64.9,28.1l-3.1-7.9c-21.3,8.4-45.4-2-53.8-23.3 c-8.4-21.3,2-45.4,23.3-53.8L31.6,3.5z"/>\n                            <path d="M42.3,39.6c5.7-4.3,13.9-3.1,18.1,2.7c4.3,5.7,3.1,13.9-2.7,18.1l4.1,5.5c8.8-6.5,10.6-19,4.1-27.7 c-6.5-8.8-19-10.6-27.7-4.1L42.3,39.6z"/>\n                            <path d="M82,35.7C74.1,18,53.4,10.1,35.7,18S10.1,46.6,18,64.3l7.6-3.4c-6-13.5,0-29.3,13.5-35.3s29.3,0,35.3,13.5 L82,35.7z"/>\n                        </svg>\n                    </div>\n                '}},preloaderColor:{type:String,default:"#fff"},effect:{type:String,default:""},contentEffect:{type:String,default:""},cacheContent:{type:Boolean,default:!0},container:{type:[String,Node],default:document.body,validator:function(t){var e=!1;if(s(t)){var n=document.querySelector(t);u(n)&&(e=!0,t=n)}else u(t)&&(e=!0);return{valid:e,value:t}}},overflowContainer:{type:[Node,String],default:document.body,validator:function(t){var e=!1;if(!u(t)||t!==document.body&&t!==document.documentElement){if(s(t))switch(t){case"body":e=!0,t=document.body;break;case"html":e=!0,t=document.documentElement}}else e=!0;return{valid:e,value:t}}}};for(var r in n)e[r]=N(t,n,e,r);return e}function N(t,n,r,o){var a=n[o],s=r[o],l=a.type,c=!l||!0===l,u=[];if(l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length&&!c;f++){var d=A(s,l[f]);u.push(d.expectedType||""),c=d.valid}}var p=u.some((function(t){return t}));void 0!==s&&!c&&p&&_('Invalid option: type check failed for option "'+o+'". Expected type: '+u.map(i).join(", ")+".");var v=a.validator;if(void 0!==s&&v){var h=v(s);h.value&&(s=h.value),h.valid||(c=!1,_('Invalid option: validator check failed for option "'+o+'".'))}return void 0!==s&&c||(s=function(t,n,r,o){var i=n[o];if(!e(i,"default"))return;var a=i.default;return"function"==typeof a&&"Function"!==O(i.type)?b(a,t,[n,r]):a}(t,n,r,o)),s}function A(t,e){var n,r=O(e);if(C.test(r)){var o=typeof t;(n=o===r.toLowerCase())||"object"!==o||(n=t instanceof e)}else if("Object"===r)n=l(t);else if("Array"===r)n=Array.isArray(t);else try{n=t instanceof e}catch(t){m('Invalid option type: "'+String(e)+'" is not a constructor'),n=!1}return{valid:n,expectedType:r}}function O(t){var e=t&&t.toString().match(w);return e?e[1]:""}var R="b-modal",x={FIXED_CONTENT:".b-modal-fixed"},S={BLOCK:R,OPEN:R+"-open",HIDE:R+"-hide",OVERLAY:R+"--overlay",CONTAINER:R+"__container",WRAPPER:R+"__wrapper",PRELOADER:R+"__preloader",PRELOADER_ICON:R+"__preloader-icon",DIALOG:R+"__dialog"},T="setContent",k="init",D="beforeShow",$="afterShow",L="beforeHide",j="afterHide",I="beforeSetContent",P="afterSetContent",B="destroy";var H=[];function W(){return H.length}function M(t,e){if(u(t)&&(u(t.parentNode)||u(e))){var n=u(t.parentNode)?t.parentNode:u(e)?e:null;n&&n.removeChild(t)}}function F(t){if(u(t))for(;t.childNodes.length>0;)t.removeChild(t.firstChild);else s(t)&&F(document.getElementById(t))}function V(t,e,n){if(f(t)){if(d(e))return t.removeAttribute("style"),t;if(l(e))return Object.entries(e).forEach((function(e){var n=e[0],r=e[1];V(t,n,r)})),t;if(s(e)){if(function(t){return void 0===t}(n)&&t.nodeType!==Node.DOCUMENT_NODE){var r=getComputedStyle(t);return e in r?r[e]:r.getPropertyValue(e)}if(d(n)||""===n||"null"===n)return t.style[e]="",t;if(s(n)||function(t){return!Number.isNaN(t)&&"number"==typeof t}(n))return t.style[e]=n,t}}return null}function q(t,e){u(e)&&(u(t)?e.appendChild(t):s(t)&&e.insertAdjacentHTML("beforeend",t))}function U(t,e,n){void 0===e&&(e={}),void 0===n&&(n=document);var r=t,o=e;return c(t)&&(o=t,r=t.tag),function(t,e){if(void 0===e&&(e={}),!t.nodeType)return null;var n=t;if(t.nodeType===Node.DOCUMENT_NODE&&(n=t.body),l(e)){if(l(e.attrs)&&Object.keys(e.attrs).forEach((function(t){"class"!==t&&"classname"!==t.toLowerCase()?""!=e.attrs[t]?n.setAttribute(t,e.attrs[t]):n.removeAttribute(t):n.className=e.attrs[t]})),l(e.style)&&V(n,e.style),l(e.props)&&Object.keys(e.props).forEach((function(t){n[t]=e.props[t]})),l(e.events)&&Object.keys(e.events).forEach((function(t){n.addEventListener(t,e.events[t])})),l(e.dataset)&&Object.keys(e.dataset).forEach((function(t){n.dataset[t]=e.dataset[t]})),s(e.children)&&(e.children=[e.children]),v(e.children)&&e.children.length>0)return e.children.forEach((function(t){u(t)&&q(t,n),s(t)&&(n.innerHTML+=t)})),n;if("text"in e&&!p(e.text))return n.innerText=e.text,n;"html"in e&&!p(e.html)&&(n.innerHTML=e.html)}return n}(n.createElement(r),o)}function z(t,e,r,o){if(!t||!t.childNodes)return null;r=!!r,o=!!o;for(var i=t.childNodes.length,a=[],s=0;s<i;s++){var l=t.childNodes[s];if(Y(l,e)){if(!o)return l;a.push(l)}if(1==r){var c=z(l,e,r,o);if(c){if(!o)return c;a=n(a,c)}}}return o||a.length>0?a:null}function G(t,e){if(f(t)){if(s(e)){var n=e.trim();if(n.length>0){if(n.includes(" "))return n.split(" ").every((function(e){return G(t,e)}));if("classList"in t)return t.classList.contains(n);if(y(t.className)&&s(t.className.baseVal))return t.getAttribute("class").split(" ").some((function(t){return t===n}))}}if(v(e)&&e.length>0)return e.every((function(e){return G(t,e)}))}return!1}function X(t,e){if(f(t)){if(s(e)){var n=e.trim();if(n.length>0){if(n.includes(" "))return void X(t,n.split(" "));if("classList"in t)return void t.classList.add(n);if(y(t.className)&&s(t.className.baseVal)){if(""===t.className.baseVal)return void(t.className.baseVal=n);var r=t.className.baseVal.split(" ");if(!r.includes(n))return r.push(n),void(t.className.baseVal=r.join(" ").trim())}return}}v(e)&&e.forEach((function(e){return X(t,e)}))}}function K(t,e){if(f(t)){if(s(e)){var n=e.trim();if(n.length>0){if(n.includes(" "))return void K(t,n.split(" "));if("classList"in t)return void t.classList.remove(n);if(y(t.className)&&s(t.className.baseVal)){var r=t.className.baseVal.split(" ").filter((function(t){return t!==n}));return void(t.className.baseVal=r.join(" "))}}}v(e)&&e.forEach((function(e){return K(t,e)}))}}function Y(t,e){if(h(e=e||{}))return e.call(window,t);if(!e.allowTextNodes&&!f(t))return!1;var n,r,o;for(n in e)if(e.hasOwnProperty(n))switch(n){case"tag":case"tagName":if(s(e[n])){if(t.tagName.toUpperCase()!=e[n].toUpperCase())return!1}else if(e[n]instanceof RegExp&&!e[n].test(t.tagName))return!1;break;case"class":case"className":if(s(e[n])){if(!G(t,e[n]))return!1}else if(e[n]instanceof RegExp&&(!s(t.className)||!e[n].test(t.className)))return!1;break;case"attr":case"attrs":case"attribute":if(s(e[n])){if(!t.getAttribute(e[n]))return!1}else if(v(e[n])){for(r=0,o=e[n].length;r<o;r++)if(e[n]&&!t.getAttribute(e[n]))return!1}else for(r in e[n])if(e[n].hasOwnProperty(r)){var i=t.getAttribute(r);if(e[n][r]instanceof RegExp){if(!s(i)||!e[n][r].test(i))return!1}else if(i!=""+e[n][r])return!1}break;case"property":case"props":if(s(e[n])){if(!t[e[n]])return!1}else if(v(e[n])){for(r=0,o=e[n].length;r<o;r++)if(e[n]&&!t[e[n]])return!1}else for(r in e[n])if(s(e[n][r])){if(t[r]!=e[n][r])return!1}else if(e[n][r]instanceof RegExp&&(!s(t[r])||!e[n][r].test(t[r])))return!1;break;case"callback":return e[n](t)}return!0}var J="undefined"!=typeof window,Q=J&&window.navigator.userAgent.toLowerCase(),Z=Q&&Q.indexOf("msie 9.0")>0;function tt(t,e,n,r,o,i,a){if(void 0===r&&(r=""),void 0===o&&(o=!0),void 0===i&&(i=!0),void 0===a&&(a=null),u(e)&&u(n)){if(o&&F(n),!r||!i)return q(e,n),void(h(a)&&b(a,t));var s=nt(r);X(e,s.enterClass),X(e,s.enterActiveClass),q(e,n);var l=it(e);st((function(){X(e,s.enterToClass),K(e,s.enterClass)})),setTimeout((function(){K(e,s.enterActiveClass),K(e,s.enterToClass),h(a)&&b(a,t)}),l)}}function et(t,e,n,r,o){if(void 0===o&&(o=null),u(e)&&u(n)){if(!r)return h(o)&&b(o,t),void M(e,n);var i=nt(r);X(e,i.leaveClass),X(e,i.leaveActiveClass),st((function(){var r=it(e);K(e,i.leaveClass),X(e,i.leaveToClass),setTimeout((function(){K(e,i.leaveActiveClass),K(e,i.leaveToClass),h(o)&&b(o,t),M(e,n)}),r)}))}}function nt(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}var rt="transition",ot="animation";function it(t){var e=window.getComputedStyle(t),n=lt((e[rt+"Delay"]||"").split(", "),(e[rt+"Duration"]||"").split(", ")),r=lt((e[ot+"Delay"]||"").split(", "),(e[ot+"Duration"]||"").split(", "));return Math.max(n,r)||0}J&&!Z&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(rt="WebkitTransition"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ot="WebkitAnimation"));var at=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function st(t){at((function(){at(t)}))}function lt(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return ct(e)+ct(t[n])})))}function ct(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ut(t,e){var n=t.$options[e];if(n){var r=a(arguments,2);b(n,t,r)}t._hasHookEvent&&t.$emit("hook:"+e)}function ft(t){var e=function(){ut(t,$)},n=t._renderEl(),r=t._renderContent(e);!r&&t._isAsyncContent&&q(function(t){var e=U("div",{props:{className:S.PRELOADER}});return q(t.$options.preloader,e),e}(t),vt(n)),ut(t,D),tt(t,n,t.$options.container,t.$options.effect,!1),t._checkScrollbar(),t._setScrollbar(),t._adjustDialog(),X(t.$options.overflowContainer,S.OPEN),pt(t,r,!1,!0,e)}function dt(t){ut(t,L),et(t,t._el,t.$options.container,t.$options.effect,(function(){t._resetAdjustments(),0===W()&&(K(t.$options.overflowContainer,S.OPEN),t._resetScrollbar())})),et(t,z(t._el,{className:S.DIALOG},!0,!1),vt(t._el),t.$options.contentEffect,(function(){ut(t,j)}))}function pt(t,e,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=null),t._el&&void 0!==e&&(ut(t,I),t.$options.cacheContent&&!n&&(t._content=e),tt(t,function(t){var e=U("div",{props:{className:S.DIALOG}});return q(t,e),e}(e),vt(t._el),t.$options.contentEffect,!0,r,(function(){ut(t,P),h(o)&&b(o,t)})))}function vt(t){return z(t,{className:S.WRAPPER},!0,!1)}function ht(t,n,r){var o;switch(typeof n){case"string":if(n.length>0&&document.getElementById(n)){var i=document.getElementById(n).cloneNode(!0);G(i,S.HIDE)&&K(i,S.HIDE),o=i}else o=n;break;case"function":var a=b(n,t);g(a)?(t._isAsyncContent=!0,a.then((function(e){t._isAsyncContent=!1,t.$emit(T,t,ht(t,e),!1,!0,r)})),a.catch((function(e){t._isAsyncContent=!1,t.$emit(T,t,e,!0,!0,r),m(e)}))):o=ht(t,a);break;case"object":if(u(n)){var s=n.cloneNode(!0);G(s,S.HIDE)&&K(s,S.HIDE),o=s}else g(n)?(t._isAsyncContent=!0,n.then((function(e){t._isAsyncContent=!1,t.$emit(T,t,ht(t,e))})),n.catch((function(e){t._isAsyncContent=!1,t.$emit(T,t,e,!0),m(e)}))):y(n)&&e(n,"data")&&(o=ht(t,n.data))}return o}var yt=new WeakMap;var gt=null,mt=null;var _t=0;function bt(t){this instanceof bt||m("Modal is a constructor and should be called with the `new` keyword"),this._init(t)}return function(t){t.prototype._init=function(t){var e=this;e._uid=_t++,function(t,e){t.$options=E(t,e)}(e,t),function(t){t._events=Object.create(null),t._hasHookEvent=!1}(e),function(t){t._isRegister=!1}(e),function(t){t._el=null,t._content=null,t._isAsyncContent=!1}(e),function(t){t._isShow=!1}(e),function(t){t._isBodyOverflowing=null,t._scrollbarWidth=null}(e),function(t){t._isDestroy=!1}(e),ut(e,k),e.$on(T,pt)}}(bt),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var i,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;for(var s=a.length;s--;)if((i=a[s])===e||i.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?a(n):n;for(var r=a(arguments,1),o=0,i=n.length;o<i;o++)b(n[o],e,r)}return e}}(bt),function(t){t.prototype._register=function(){var t=this,e=t._uid;t._hasRegister(e)||(t._isRegister=!0,H.push(e))},t.prototype._unregister=function(){var t=this,e=t._uid;t._hasRegister(e)&&(H.splice(H.indexOf(e),1),t._isRegister=!1)},t.prototype._hasRegister=function(){return H.indexOf(this._uid)>=0}}(bt),function(t){t.prototype._renderEl=function(){var t=this;if(!this._el){var e=U("div",{props:{className:S.WRAPPER}}),n=U("div",{props:{className:S.CONTAINER},children:[e]});t._el=U("div",{props:{className:S.BLOCK+" "+S.OVERLAY},events:{click:function(e){!function(t,e){(vt(t._el)===e||e.closest('[data-modal-close=""]'))&&t.hide()}(t,e.target)}},children:[n]})}return t._el},t.prototype._renderContent=function(t){var e=this;return e._content&&e.$options.cacheContent||(e._content=ht(e,e.$options.content,t)),e._content},t.prototype.setContent=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var r=this;r._isDestroy||pt(r,ht(r,t),e,n)}}(bt),function(t){t.prototype.show=function(){var t=this;return t._hasRegister()||t._isDestroy||(t._isShow=!0,t._register(),ft(t)),t},t.prototype.hide=function(){var t=this;return!t._hasRegister()||t._isDestroy||(dt(t),t._unregister(),t._isShow=!1),t}}(bt),function(t){t.prototype._adjustDialog=function(){var t=this,e=t._el,n=e.scrollHeight>document.documentElement.clientHeight;1===W()&&(gt=n,mt=t._isBodyOverflowing),(!t._isBodyOverflowing&&n||!mt&&gt)&&(e.style.paddingLeft=t._scrollbarWidth+"px"),(t._isBodyOverflowing&&!n||mt&&!gt)&&(e.style.paddingRight=t._scrollbarWidth+"px")},t.prototype._resetAdjustments=function(){var t=this._el;t.style.paddingLeft="",t.style.paddingRight=""},t.prototype._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=function(){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}()},t.prototype._setScrollbar=function(){var t=this;if(t._isBodyOverflowing){for(var e=document.querySelectorAll(x.FIXED_CONTENT),n=0;n<e.length;n++){var r=e[n],o=r.style.paddingRight,i=window.getComputedStyle(r,null).paddingRight;yt.set(r,o),r.style.paddingRight=parseFloat(i)+t._scrollbarWidth+"px"}var a=document.body.style.paddingRight,s=window.getComputedStyle(document.body,null).paddingRight;yt.set(document.body,a),document.body.style.paddingRight=parseFloat(s)+t._scrollbarWidth+"px"}},t.prototype._resetScrollbar=function(){for(var t=document.querySelectorAll(x.FIXED_CONTENT),e=0;e<t.length;e++){var n=t[e],r=yt.get(n);void 0!==r&&(n.style.paddingRight=r,yt.delete(n))}var o=yt.get(document.body);void 0!==o&&(document.body.style.paddingRight=o,yt.delete(document.body))}}(bt),function(t){t.prototype.destroy=function(){var t=this;t._isDestroy||(t._isDestroy=!0,function(t){t._isBodyOverflowing=null,t._scrollbarWidth=null,gt=null,mt=null}(t),function(t){M(t._el,t.$options.container),t._isShow=!1}(t),function(t){t._el=null,t._content=null,t._isAsyncContent=!1}(t),function(t){t._unregister()}(t),ut(t,B),function(t){t.$off(),t._hasHookEvent=!1}(t),function(t){t.$options=null}(t))}}(bt),bt}));
